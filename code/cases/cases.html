<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Seguimiento</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Arial Nova', Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .tracking-container {
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stage-point {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: relative;
            z-index: 10;
            transition: all 0.3s ease;
        }
        
        .stage-point:hover {
            transform: scale(1.2);
        }
        
        .stage-line {
            height: 2px;
            flex-grow: 1;
            transition: all 0.3s ease;
        }
        
        .modal {
            backdrop-filter: blur(8px);
            background-color: rgba(0, 0, 0, 0.8);
        }
        
        .current-stage {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 0, 0, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
            }
        }
        
        .stage-point.blocked {
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        /* Animación para el SVG */
        .svg-container {
            cursor: pointer;
            transition: transform 0.5s ease, filter 0.5s ease;
            filter: drop-shadow(0 0 0px rgba(255, 255, 255, 0.5));
        }
        
        .svg-container:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.8));
        }
        
        .svg-pulse {
            animation: svgPulse 3s infinite;
        }
        
        @keyframes svgPulse {
            0% {
                opacity: 0.8;
                transform: scale(0.98);
            }
            50% {
                opacity: 1;
                transform: scale(1.02);
            }
            100% {
                opacity: 0.8;
                transform: scale(0.98);
            }
        }
        
        /* Transición para el overlay */
        .tracking-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .tracking-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        /* Dot grid background */
        .dot-grid {
            background-image: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
        }
        
        /* Close button */
        .close-button {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .close-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        
        .close-button::before,
        .close-button::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 2px;
            background-color: white;
        }
        
        .close-button::before {
            transform: rotate(45deg);
        }
        
        .close-button::after {
            transform: rotate(-45deg);
        }
    </style>
</head>
<body class="bg-black text-white">
    <!-- Dot grid background -->
    <div class="dot-grid"></div>
    
    <!-- Sección principal con SVG Lupa -->
    <section class="min-h-screen flex items-center justify-center bg-black bg-opacity-90 p-4 relative z-10">
        <div class="svg-container svg-pulse" id="intro-svg">
            <svg id="a" xmlns="http://www.w3.org/2000/svg" width="4.24cm" height="5.72cm" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 120.17 162.13"><defs><style>.c{fill:#fff;}.d{fill:none;}.e{clip-path:url(#b);}</style><clipPath id="b"><rect class="d" x="0" y="49.82" width="120.09" height="5.5"></rect></clipPath></defs><rect class="c" x="120.09" width=".08" height="45.04"></rect><g class="e"><path class="c" d="M0,49.82h120.1v5.5H0v-5.5Z"></path></g><path class="c" d="M13.41,109.14c-3.88,0-6.74-1.36-8.58-4.07-1.84-2.72-2.78-6.87-2.83-12.47h8.57c0,2.26.12,4.03.36,5.29.24,1.26.54,2.08.9,2.47.36.38.82.57,1.37.57,1.41,0,2.13-1.49,2.15-4.48,0-1.94-.37-3.59-1.11-4.94-.74-1.35-2.11-2.98-4.09-4.88-2.84-2.71-4.86-5.28-6.03-7.74-1.18-2.45-1.77-5.36-1.77-8.74,0-3.65.91-6.47,2.74-8.46,1.83-1.99,4.42-2.98,7.78-2.98,7.14,0,10.78,4.97,10.92,14.92h-8.5c-.05-4.46-.81-6.68-2.29-6.66-1.18,0-1.77.99-1.77,2.98s.37,3.53,1.12,4.9c.75,1.38,2.12,3.01,4.11,4.91,2.85,2.66,4.86,5.21,6.02,7.66,1.17,2.45,1.75,5.39,1.75,8.81,0,4.16-.93,7.35-2.78,9.57-1.85,2.22-4.53,3.33-8.04,3.33Z"></path><path class="c" d="M49.42,103.68c-1.71,3.64-4.79,5.46-9.24,5.46s-7.51-1.82-9.19-5.46c-1.67-3.64-2.51-10.22-2.51-19.74s.85-16.1,2.55-19.75c1.7-3.65,4.77-5.48,9.22-5.48s7.52,1.83,9.21,5.48c1.69,3.65,2.53,10.24,2.53,19.75s-.86,16.09-2.57,19.74ZM40.19,100.93c1,0,1.62-1.03,1.87-3.09.26-2.06.38-6.69.38-13.89s-.13-11.83-.38-13.89c-.25-2.06-.85-3.09-1.8-3.09-1,0-1.63,1.03-1.89,3.09-.27,2.06-.4,6.69-.4,13.89s.13,11.83.4,13.89c.26,2.06.87,3.09,1.82,3.09Z"></path><path class="c" d="M57.06,108.45v-49h9.15v40.75h10.16v8.26h-19.32Z"></path><path class="c" d="M103.35,109.14c-3.47,0-6.16-1.15-8.06-3.46-1.91-2.31-2.86-5.63-2.86-9.96,0-4.97,1.51-9.47,4.54-13.49-2.45-4.92-3.68-9.14-3.7-12.64-.01-3.51.85-6.19,2.59-8.06,1.74-1.87,4.19-2.81,7.36-2.81s5.42.87,7.17,2.61c1.76,1.73,2.64,4.14,2.64,7.21,0,4.17-2.39,8.73-7.18,13.7l4.13,7.45c.04-1.41.07-4.17.07-8.29h7.15c-.23,7.91-.96,13.81-2.19,17.69l5.16,9.36h-8.87l-.76-1.42c-1.81,1.41-4.2,2.11-7.18,2.11ZM102.59,75.99c1.85-2.4,2.76-4.87,2.74-7.39,0-1.8-.61-2.7-1.84-2.7-1.41,0-2.11.95-2.11,2.85,0,2.98.4,5.4,1.21,7.25ZM104.91,101.99c1,0,1.83-.22,2.5-.66l-6.17-11.2c-.33,1.32-.5,3.06-.52,5.23,0,4.42,1.4,6.62,4.2,6.62Z"></path><path class="c" d="M0,0v45.04h120.09V0H0ZM17.62,39.16c-1.46,1.76-3.58,2.64-6.37,2.64-3.07,0-5.34-1.07-6.79-3.22-1.45-2.15-2.2-5.43-2.24-9.86h6.77c0,1.8.1,3.18.29,4.18.19,1,.42,1.65.71,1.95.29.3.64.46,1.09.46,1.12,0,1.68-1.18,1.7-3.54,0-1.53-.29-2.84-.87-3.91-.59-1.08-1.66-2.36-3.24-3.86-2.24-2.14-3.84-4.18-4.77-6.12-.93-1.93-1.4-4.24-1.4-6.91,0-2.89.72-5.12,2.16-6.69s3.49-2.36,6.14-2.36c5.66,0,8.54,3.93,8.65,11.79h-6.72c-.04-3.53-.64-5.28-1.81-5.26-.94,0-1.4.78-1.4,2.36s.3,2.79.9,3.88c.59,1.09,1.67,2.38,3.25,3.88,2.25,2.11,3.84,4.13,4.77,6.07s1.39,4.26,1.39,6.97c0,3.29-.73,5.81-2.2,7.56ZM39.3,8.98h-5.41v32.27h-7.25V8.98h-5.37V2.48h18.03v6.5ZM46.13,41.25L40.76,2.48h7.3l2.2,24.72h.16l2.2-24.72h6.86l-5.41,38.77h-7.92ZM71.46,41.25l-.72-6.28h-4.5l-.74,6.28h-6.77l5.79-38.77h8.43l5.74,38.77h-7.22ZM96.43,8.98h-8.35v8.45h7.22v6.45h-7.22v10.85h8.35v6.53h-15.59V2.48h15.59v6.5ZM110.74,41.25l-3.31-16.03h-1.43v16.03h-7.25V2.48h7.82c3.41,0,5.99.97,7.76,2.9,1.76,1.93,2.64,4.77,2.64,8.52,0,4.08-1.05,7.05-3.15,8.91l4.28,18.44h-7.36Z"></path><path class="d" d="M18.44,24.63c.92,1.94,1.39,4.26,1.39,6.97,0,3.29-.73,5.81-2.2,7.56-1.46,1.76-3.58,2.64-6.37,2.64-3.07,0-5.34-1.07-6.79-3.22-1.45-2.15-2.2-5.43-2.24-9.86h6.77c0,1.8.1,3.18.29,4.18.19,1,.42,1.65.71,1.95.29.3.64.46,1.09.46,1.12,0,1.68-1.18,1.7-3.54,0-1.53-.29-2.84-.87-3.91-.59-1.08-1.66-2.36-3.24-3.86-2.24-2.14-3.84-4.18-4.77-6.12-.93-1.93-1.4-4.24-1.4-6.91,0-2.89.72-5.12,2.16-6.69s3.49-2.36,6.14-2.36c5.66,0,8.54,3.93,8.65,11.79h-6.72c-.04-3.53-.64-5.28-1.81-5.26-.94,0-1.4.78-1.4,2.36s.3,2.79.9,3.88c.59,1.09,1.67,2.38,3.25,3.88,2.25,2.11,3.84,4.13,4.77,6.07Z"></path><polygon class="d" points="21.28 2.48 39.3 2.48 39.3 8.98 33.89 8.98 33.89 41.25 26.65 41.25 26.65 8.98 21.28 8.98 21.28 2.48"></polygon><polygon class="d" points="59.47 2.48 54.06 41.25 46.13 41.25 40.76 2.48 48.05 2.48 50.25 27.2 50.41 27.2 52.61 2.48 59.47 2.48"></polygon><polygon class="c" points="70.05 29.18 66.93 29.18 68.38 12.67 68.54 12.67 70.05 29.18"></polygon><path class="d" d="M72.94,2.48h-8.43l-5.79,38.77h6.77l.74-6.28h4.5l.72,6.28h7.22l-5.74-38.77ZM66.93,29.18l1.45-16.52h.16l1.51,16.52h-3.13Z"></path><polygon class="d" points="80.84 2.48 96.43 2.48 96.43 8.98 88.08 8.98 88.08 17.43 95.3 17.43 95.3 23.88 88.08 23.88 88.08 34.72 96.43 34.72 96.43 41.25 80.84 41.25 80.84 2.48"></polygon><path class="c" d="M109.48,13.9c0,3.22-.95,4.82-2.86,4.82h-.63v-9.74h.63c1.9.02,2.86,1.66,2.86,4.91Z"></path><path class="d" d="M113.83,22.81c2.1-1.86,3.15-4.83,3.15-8.91,0-3.75-.88-6.59-2.64-8.52-1.77-1.93-4.35-2.9-7.76-2.9h-7.82v38.77h7.25v-16.03h1.43l3.31,16.03h7.36l-4.28-18.44ZM106.63,18.72h-.63v-9.74h.63c1.9.02,2.86,1.66,2.86,4.91s-.95,4.82-2.86,4.82Z"></path><path class="c" d="M0,112.4v49.73h120.06v-49.73H0ZM25.27,124.23h-5.43v32.42h-7.27v-32.42h-5.41v-6.54h18.12v6.54ZM43.21,124.23h-8.38v8.5h7.25v6.48h-7.25v10.89h8.38v6.56h-15.66v-38.96h15.66v6.54ZM57.61,156.65l-3.34-16.1h-1.43v16.1h-7.29v-38.96h7.86c3.42,0,6.01.97,7.79,2.91,1.77,1.93,2.66,4.79,2.66,8.56,0,4.1-1.06,7.08-3.17,8.96l4.31,18.52h-7.39ZM92.98,156.65h-7v-29.58h-.11l-3.94,29.58h-4.46l-3.88-29.58h-.11v29.58h-6.4v-38.96h9.9l2.82,21.23h.11l2.78-21.23h10.31v38.96ZM110.76,154.55c-1.47,1.77-3.61,2.65-6.4,2.65-3.08,0-5.36-1.08-6.82-3.24-1.46-2.15-2.2-5.46-2.24-9.91h6.81c0,1.8.09,3.2.29,4.2.19,1,.42,1.66.71,1.96.29.3.65.46,1.09.46,1.12,0,1.69-1.19,1.71-3.56,0-1.55-.29-2.86-.88-3.93-.59-1.08-1.67-2.37-3.26-3.88-2.25-2.15-3.85-4.19-4.79-6.14-.94-1.95-1.4-4.27-1.4-6.95,0-2.91.72-5.14,2.17-6.72,1.45-1.58,3.52-2.37,6.18-2.37,5.68,0,8.58,3.95,8.68,11.85h-6.76c-.03-3.55-.64-5.31-1.81-5.3-.94,0-1.41.79-1.41,2.37s.3,2.81.9,3.9c.6,1.09,1.69,2.39,3.27,3.9,2.26,2.11,3.85,4.15,4.78,6.1s1.4,4.28,1.4,7c0,3.3-.74,5.84-2.21,7.61Z"></path><polygon class="d" points="7.15 117.69 25.27 117.69 25.27 124.23 19.83 124.23 19.83 156.65 12.56 156.65 12.56 124.23 7.15 124.23 7.15 117.69"></polygon><polygon class="d" points="27.55 117.69 43.21 117.69 43.21 124.23 34.83 124.23 34.83 132.72 42.09 132.72 42.09 139.2 34.83 139.2 34.83 150.09 43.21 150.09 43.21 156.65 27.55 156.65 27.55 117.69"></polygon><path class="c" d="M56.33,129.16c0,3.24-.95,4.85-2.86,4.85h-.63v-9.78h.63c1.91.02,2.86,1.66,2.86,4.94Z"></path><path class="d" d="M53.47,134.01h-.63v-9.78h.63c1.91.02,2.86,1.66,2.86,4.94s-.95,4.85-2.86,4.85Z"></path><polygon class="d" points="82.67 117.69 92.98 117.69 92.98 156.65 85.97 156.65 85.97 127.07 85.86 127.07 81.92 156.65 77.45 156.65 73.57 127.07 73.46 127.07 73.46 156.65 67.06 156.65 67.06 117.69 76.96 117.69 79.77 138.92 79.89 138.92 82.67 117.69"></polygon><path class="d" d="M111.57,139.94c.93,1.95,1.4,4.28,1.4,7,0,3.3-.74,5.84-2.21,7.61-1.47,1.77-3.61,2.65-6.4,2.65-3.08,0-5.36-1.08-6.82-3.24-1.46-2.15-2.2-5.46-2.24-9.91h6.81c0,1.8.09,3.2.29,4.2.19,1,.42,1.66.71,1.96.29.3.65.46,1.09.46,1.12,0,1.69-1.19,1.71-3.56,0-1.55-.29-2.86-.88-3.93-.59-1.08-1.67-2.37-3.26-3.88-2.25-2.15-3.85-4.19-4.79-6.14-.94-1.95-1.4-4.27-1.4-6.95,0-2.91.72-5.14,2.17-6.72,1.45-1.58,3.52-2.37,6.18-2.37,5.68,0,8.58,3.95,8.68,11.85h-6.76c-.03-3.55-.64-5.31-1.81-5.3-.94,0-1.41.79-1.41,2.37s.3,2.81.9,3.9c.6,1.09,1.69,2.39,3.27,3.9,2.26,2.11,3.85,4.15,4.78,6.1Z"></path><rect class="d" x="120.06" y="112.4" width=".03" height="49.73"></rect></svg>
        </div>
    </section>

    <!-- Overlay del sistema de seguimiento -->
    <div id="tracking-overlay" class="tracking-overlay">
        <div class="close-button" id="close-tracking"></div>
        
        <div class="tracking-container w-full max-w-4xl p-6 md:p-10">
            <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">Seguimiento de Trámite</h2>
            
            <div class="mb-8">
                <div class="flex items-center">
                    <input type="text" id="trackingInput" placeholder="Ingresa tu código de seguimiento" class="search-input w-full p-4 text-white focus:outline-none">
                    <button id="searchButton" class="bg-white text-black p-4 hover:bg-gray-200 transition-colors">Buscar</button>
                </div>
                <p class="text-sm mt-2 text-gray-400">Códigos de prueba: TR-12345, TR-67890, TR-54321, TR-98765</p>
            </div>
            
            <div id="trackingResult" class="hidden">
                <div class="mb-6">
                    <h3 id="trackingTitle" class="text-2xl font-bold mb-2"></h3>
                    <p id="trackingDescription" class="text-gray-300"></p>
                </div>
                
                <div id="stagesContainer" class="my-12">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm">Inicio</span>
                        <span class="text-sm">Finalización</span>
                    </div>
                    <div id="stagesTracker" class="flex items-center w-full"></div>
                </div>
                
                <div id="statusMessage" class="mt-6 text-center py-3 hidden"></div>
            </div>
            
            <div id="noResultsMessage" class="hidden text-center py-8">
                <svg class="w-16 h-16 mx-auto mb-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p class="text-xl">No se encontró ningún trámite con ese código.</p>
                <p class="text-gray-400 mt-2">Verifica e intenta nuevamente.</p>
            </div>
        </div>
    </div>

    <!-- Modal para detalles de etapa -->
    <div id="stageModal" class="fixed inset-0 flex items-center justify-center z-[200] hidden">
        <div class="modal-backdrop fixed inset-0 bg-black bg-opacity-70"></div>
        <div class="modal relative w-full max-w-md p-6 rounded-lg">
            <div class="bg-black border border-gray-800 rounded-lg p-6">
                <h3 id="modalTitle" class="text-2xl font-bold mb-4"></h3>
                <p id="modalDescription" class="text-gray-300 mb-6"></p>
                <div class="flex justify-between items-center">
                    <span id="modalDate" class="text-sm text-gray-400"></span>
                    <button id="closeModal" class="px-4 py-2 bg-white text-black rounded hover:bg-gray-200 transition-colors">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para etapas bloqueadas -->
    <div id="blockedModal" class="fixed inset-0 flex items-center justify-center z-[200] hidden">
        <div class="modal-backdrop fixed inset-0 bg-black bg-opacity-70"></div>
        <div class="modal relative w-full max-w-md p-6 rounded-lg">
            <div class="bg-black border border-gray-800 rounded-lg p-6">
                <h3 class="text-2xl font-bold mb-4 text-red-500">Etapa no disponible</h3>
                <p class="text-gray-300 mb-6">La información de esta etapa no está disponible en este momento.</p>
                <div class="flex justify-end">
                    <button id="closeBlockedModal" class="px-4 py-2 bg-white text-black rounded hover:bg-gray-200 transition-colors">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos de trámites
        const trackingData = {
            "TR-12345": {
                title: "Solicitud de Permiso Comercial",
                description: "Trámite para obtener licencia comercial para establecimiento.",
                currentStage: 2,
                completed: false,
                rejected: false,
                stages: [
                    { 
                        name: "Etapa uno", 
                        description: "Recepción y validación de documentos. Se verifica que toda la documentación presentada cumpla con los requisitos establecidos por la normativa vigente.",
                        date: "15/05/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa dos", 
                        description: "Análisis técnico de la solicitud. Un equipo especializado evalúa la viabilidad técnica y legal de la solicitud presentada.",
                        date: "22/05/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa tres", 
                        description: "Inspección del local comercial. Personal autorizado realiza una visita al establecimiento para verificar condiciones.",
                        date: "29/05/2023",
                        completed: false,
                        blocked: false
                    },
                    { 
                        name: "Etapa cuatro", 
                        description: "Evaluación de seguridad. Se analizan los aspectos relacionados con la seguridad del establecimiento.",
                        date: "05/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa cinco", 
                        description: "Evaluación ambiental. Se verifica el cumplimiento de normativas ambientales aplicables.",
                        date: "12/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa seis", 
                        description: "Revisión legal final. El departamento jurídico realiza una última revisión de toda la documentación.",
                        date: "19/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa siete", 
                        description: "Aprobación de la licencia. La autoridad competente emite la resolución final sobre la solicitud.",
                        date: "26/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa ocho", 
                        description: "Generación de certificado. Se elabora el documento oficial que acredita la licencia comercial.",
                        date: "03/07/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa nueve", 
                        description: "Notificación al solicitante. Se contacta al interesado para informar sobre la resolución.",
                        date: "10/07/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa diez", 
                        description: "Entrega de documentación final. El solicitante recibe la licencia y documentación complementaria.",
                        date: "17/07/2023",
                        completed: false,
                        blocked: true
                    }
                ]
            },
            "TR-67890": {
                title: "Registro de Marca Comercial",
                description: "Proceso de registro y protección de marca comercial.",
                currentStage: 5,
                completed: false,
                rejected: false,
                stages: [
                    { 
                        name: "Etapa uno", 
                        description: "Recepción de solicitud de registro. Se recibe la documentación inicial y se asigna un número de expediente.",
                        date: "10/03/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa dos", 
                        description: "Examen de forma. Se verifica que la solicitud cumpla con todos los requisitos formales establecidos.",
                        date: "17/03/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa tres", 
                        description: "Publicación en gaceta oficial. La solicitud se publica para conocimiento público y posibles oposiciones.",
                        date: "31/03/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa cuatro", 
                        description: "Período de oposición. Plazo durante el cual terceros pueden presentar oposiciones al registro.",
                        date: "30/04/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa cinco", 
                        description: "Examen de fondo. Análisis detallado de la distintividad y disponibilidad de la marca solicitada.",
                        date: "15/05/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa seis", 
                        description: "Resolución de solicitud. La autoridad competente emite una decisión sobre el registro de la marca.",
                        date: "30/05/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa siete", 
                        description: "Emisión de certificado. Se genera el documento oficial que acredita el registro de la marca.",
                        date: "15/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa ocho", 
                        description: "Notificación al solicitante. Se informa al interesado sobre la resolución final del proceso.",
                        date: "22/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa nueve", 
                        description: "Registro en base de datos nacional. La marca se incorpora al registro nacional de propiedad intelectual.",
                        date: "30/06/2023",
                        completed: false,
                        blocked: true
                    },
                    { 
                        name: "Etapa diez", 
                        description: "Entrega de documentación final. El solicitante recibe el certificado y documentación complementaria.",
                        date: "07/07/2023",
                        completed: false,
                        blocked: true
                    }
                ]
            },
            "TR-54321": {
                title: "Renovación de Licencia",
                description: "Proceso de renovación de licencia operativa.",
                currentStage: 3,
                completed: true,
                rejected: false,
                stages: [
                    { 
                        name: "Etapa uno", 
                        description: "Recepción de solicitud de renovación. Se recibe la documentación y se verifica que esté completa.",
                        date: "05/04/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa dos", 
                        description: "Verificación de antecedentes. Se revisa el historial de cumplimiento normativo del solicitante.",
                        date: "12/04/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa tres", 
                        description: "Aprobación y emisión de licencia renovada. Se finaliza el proceso y se emite la nueva licencia.",
                        date: "19/04/2023",
                        completed: true,
                        blocked: false
                    }
                ]
            },
            "TR-98765": {
                title: "Solicitud de Permiso Especial",
                description: "Trámite para obtener permiso de operación especial.",
                currentStage: 3,
                completed: true,
                rejected: true,
                stages: [
                    { 
                        name: "Etapa uno", 
                        description: "Recepción de solicitud. Se recibe la documentación y se asigna un número de expediente.",
                        date: "10/06/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa dos", 
                        description: "Evaluación técnica. Se analiza la viabilidad técnica y legal de la solicitud presentada.",
                        date: "17/06/2023",
                        completed: true,
                        blocked: false
                    },
                    { 
                        name: "Etapa tres", 
                        description: "Resolución final. La autoridad competente emite la decisión sobre la solicitud presentada.",
                        date: "24/06/2023",
                        completed: true,
                        blocked: false
                    }
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            const introSvg = document.getElementById('intro-svg');
            const trackingOverlay = document.getElementById('tracking-overlay');
            const closeTracking = document.getElementById('close-tracking');
            
            const searchButton = document.getElementById('searchButton');
            const trackingInput = document.getElementById('trackingInput');
            const trackingResult = document.getElementById('trackingResult');
            const noResultsMessage = document.getElementById('noResultsMessage');
            const trackingTitle = document.getElementById('trackingTitle');
            const trackingDescription = document.getElementById('trackingDescription');
            const stagesTracker = document.getElementById('stagesTracker');
            const stageModal = document.getElementById('stageModal');
            const blockedModal = document.getElementById('blockedModal');
            const closeModal = document.getElementById('closeModal');
            const closeBlockedModal = document.getElementById('closeBlockedModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');
            const modalDate = document.getElementById('modalDate');
            const statusMessage = document.getElementById('statusMessage');

            // Mostrar overlay de tracking
            introSvg.addEventListener('click', function() {
                trackingOverlay.classList.add('active');
            });
            
            // Cerrar overlay de tracking
            closeTracking.addEventListener('click', function() {
                trackingOverlay.classList.remove('active');
            });

            searchButton.addEventListener('click', searchTracking);
            trackingInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchTracking();
                }
            });

            closeModal.addEventListener('click', function() {
                stageModal.classList.add('hidden');
            });

            closeBlockedModal.addEventListener('click', function() {
                blockedModal.classList.add('hidden');
            });

            document.querySelector('.modal-backdrop')?.addEventListener('click', function() {
                stageModal.classList.add('hidden');
                blockedModal.classList.add('hidden');
            });

            function searchTracking() {
                const trackingCode = trackingInput.value.trim();
                
                if (trackingData[trackingCode]) {
                    displayTrackingInfo(trackingData[trackingCode]);
                    trackingResult.classList.remove('hidden');
                    noResultsMessage.classList.add('hidden');
                } else {
                    trackingResult.classList.add('hidden');
                    noResultsMessage.classList.remove('hidden');
                }
            }

            function displayTrackingInfo(data) {
                trackingTitle.textContent = data.title;
                trackingDescription.textContent = data.description;
                
                // Mostrar mensaje de estado según el resultado
                if (data.completed) {
                    if (data.rejected) {
                        statusMessage.textContent = "¡Trámite rechazado por la autoridad! Consultar Asesoría Legal STVAER.";
                        statusMessage.className = "mt-6 text-center py-3 bg-red-900 bg-opacity-30 text-red-400 rounded-lg";
                    } else {
                        statusMessage.textContent = "¡Trámite completado con éxito!";
                        statusMessage.className = "mt-6 text-center py-3 bg-green-900 bg-opacity-30 text-green-400 rounded-lg";
                    }
                    statusMessage.classList.remove('hidden');
                } else {
                    statusMessage.classList.add('hidden');
                }
                
                // Limpiar el contenedor de etapas
                stagesTracker.innerHTML = '';
                
                // Crear el punto inicial (siempre blanco)
                const startPoint = document.createElement('div');
                startPoint.className = 'stage-point bg-white';
                stagesTracker.appendChild(startPoint);
                
                // Crear las etapas intermedias
                for (let i = 0; i < data.stages.length; i++) {
                    const stage = data.stages[i];
                    
                    // Línea conectora
                    const line = document.createElement('div');
                    line.className = `stage-line ${i < data.currentStage ? 'bg-white' : 'bg-gray-600'}`;
                    stagesTracker.appendChild(line);
                    
                    // Punto de etapa
                    const point = document.createElement('div');
                    
                    if (i === data.currentStage && !data.completed) {
                        // Punto actual (rojo)
                        point.className = 'stage-point bg-red-600 current-stage';
                    } else if (i < data.currentStage || data.completed) {
                        // Puntos completados (blancos)
                        point.className = 'stage-point bg-white';
                    } else {
                        // Puntos futuros (gris)
                        point.className = 'stage-point bg-gray-600';
                    }
                    
                    // Agregar clase blocked si corresponde
                    if (stage.blocked) {
                        point.classList.add('blocked');
                    } else {
                        point.classList.add('cursor-pointer');
                    }
                    
                    point.setAttribute('data-stage', i);
                    point.title = stage.name;
                    stagesTracker.appendChild(point);
                    
                    // Agregar evento para mostrar detalles
                    point.addEventListener('click', function() {
                        const stageIndex = parseInt(this.getAttribute('data-stage'));
                        const stageInfo = data.stages[stageIndex];
                        
                        if (stageInfo.blocked) {
                            blockedModal.classList.remove('hidden');
                        } else {
                            modalTitle.textContent = stageInfo.name;
                            modalDescription.textContent = stageInfo.description;
                            modalDate.textContent = `Fecha: ${stageInfo.date}`;
                            
                            stageModal.classList.remove('hidden');
                        }
                    });
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93dc6698e45a42f0',t:'MTc0NjkxMTE5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
